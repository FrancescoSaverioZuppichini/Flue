<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Action.html">Action</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Store.html">Store</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#actions">actions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#createAction">createAction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#dispatch">dispatch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#dispatchAction">dispatchAction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#getState">getState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#initialize">initialize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#reduce">reduce</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#reduceMap">reduceMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Store.html#subscribe">subscribe</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SuperStore.html">SuperStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addActions">addActions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addActionsFromStore">addActionsFromStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addProvider">addProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addReducer">addReducer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addStore">addStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#addStores">addStores</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#applyGlobalMiddleware">applyGlobalMiddleware</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#applyMiddlewareToStore">applyMiddlewareToStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SuperStore.html#applyMiddlewareToStores">applyMiddlewareToStores</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Flue - Flux + Vue</h1><h2>Yep, another flux implementation</h2><p>Francesco Saverio Zuppichini</p>
<h3>Installation</h3><pre class="prettyprint source lang-bash"><code>npm install -S flue-vue</code></pre><p>And import in your root component.</p>
<pre class="prettyprint source lang-javascript"><code>import { flue } from 'flue-vue'

Vue.use(flue)</code></pre><p>After that, <em>Flue</em>  will be available as <em>$store</em>  inside any component.</p>
<pre class="prettyprint source lang-javascript"><code>//SomeVueComponent.vue
export default {
    data() { ... }
    // inside a vue component
    this.$store
    this.$store.actions.something() // call an actions from a store
    this.$store.state // access the global shared state
}</code></pre><p>To add a store to  the <em>Flue</em></p>
<pre class="prettyprint source lang-javascript"><code>import yourStore from './YourStore.js'
import { flue } from 'flue-vue'
flue.addStore(yourStore) // add one
flue.addStores([yourStore, ...]) // add multiple</code></pre><h3>Introduction</h3><p>Flue combines the Redux single state paradigm and stateless reducers into a friendly environment. It uses the Vue Virtual Machine in order to automatically make &quot;reactive&quot; the store's state so no binding/event emitting is needed. You take it, you put in your component and it works. </p>
<h3>Quick Start</h3><p>Let's show to a short example in order to introduce you to the basic concepts.</p>
<pre class="prettyprint source lang-javascript"><code>import { flue, Store } from 'flue-vue'

class WelcomeToFLue extends Store {
    constructor () {
        super()
        this.state.hasSaidWelcome = false
    }

    reduce (action) {
        this.reduceMap(action, {
            SAY_WELCOME: ({ text }) => {
                console.log(&quot;Welcome to Flue&quot;)
                this.state.hasSaidWelcome = true 
            }
        })
    }

    actions(ctx) {
        return {
            sayWelcome () {
                ctx.dispatchAction('SAY_WELCOME')
            },
        }
    }
}

const welcomeToFlue = new WelcomeToFLue()

flue.addStore(welcomeToFlue)

flue.actions.sayWelcome() // &quot;Welcome to Flue&quot;
console.log(flue.state.hasSaidWelcome) // true</code></pre><h2>Store</h2><p>Each Store must be created by extending the <em>Store</em> class provided by Flue, it provides a common interface to reduce and fire actions.</p>
<h3>State</h3><p>The state <em>must</em> be initialised into the constructor in order to make it reactive. Otherwise <code>Vue.set()</code> must be called. In our example</p>
<pre class="prettyprint source lang-javascript"><code>constructor () {
        super()
        this.state.hasSaidWelcome = false
}</code></pre><p>We initialize the state by setting <code>hasSaidWelcome</code> to <code>false</code></p>
<h3>Reduce</h3><p>Each Store can implement the <code>reduce</code> function that receives an action as argument and switch behavior accordingly on the action's type. Usually, a <em>switch</em> statement is used. By following our example:</p>
<pre class="prettyprint source lang-javascript"><code>    reduce (action) {
        switch (action.type) {
            case 'SAY_WELCOME': ({ text }) => {
                console.log(&quot;Welcome to Flue&quot;)
                this.state.hasSaidWelcome = true 
            }
        })
    }</code></pre><p><em>Store</em> exposes a helper function, called <strong>reduceMap</strong> that create a map with an actions types and function. </p>
<pre class="prettyprint source lang-javascript"><code>    reduce (action) {
        this.reduceMap(action, {
            SAY_WELCOME: ({ text }) => {
                console.log(&quot;Welcome to Flue&quot;)
                this.state.hasSaidWelcome = true 
            }
        })
    }</code></pre><p>It makes the code faster to write. An other example:</p>
<pre class="prettyprint source lang-javascript"><code>this.reduceMap(action, {
    ADD_FOOD_TO_SHOPPING_CART: this.addFoodToShoppingCart,
    REMOVE_FOOD_FROM_SHOPPING_CART: this.removeFoodFromShoppingCart,
    CHECK_OUT: this.checkOut
})</code></pre><h3>Actions</h3><p>Each Store can implement the <strong>actions</strong> function to return an Object of actions. In our example:</p>
<pre class="prettyprint source lang-javascript"><code>actions(ctx) {
    return {
        sayWelcome () {
            ctx.dispatchAction('SAY_WELCOME')
        },
    }
}</code></pre><p>This special function is fetched by the <strong>SuperStore</strong>  and flat into a common object in order to provide a global API interface for the components. Actions can be called directly from the <em>$store</em> pointer inside a component. Following our previous example:</p>
<pre class="prettyprint source lang-javascript"><code>export default {
    \\inside a component
    this.$store.actions.fetchDummy()
}</code></pre><p>The context is passed to actions in order to call the store's method from the actions.</p>
<p>Remember that you can always create a single action and dispatch it using <code>store.dispatch()</code> method.</p>
<pre class="prettyprint source lang-javascript"><code>import { aStore } from 'aStore.js'

const anAction = { type: 'FOO', payload: {} } // the classic way
const anAction = new Action('FOO', {}) // the explicit way, when the payload can be removed if it is empty
const anAction = aStore.createAction('FOO', {})

aStore.dispatch(anAction)

//or you can use the SuperStore

import { flue } from 'flue-vue'

flue.dispatch(anAction)</code></pre><h3>Subscribe</h3><p>For convenience is it possible to subscribe for updates in any store. Since we are using a promise base dispatcher, then also async operations are support and the listeners will be called at the right time. </p>
<pre class="prettyprint source lang-javascript"><code>flue.subscribe((store) => { console.log(store.state) }) \\ subscribe to the global store

DummyStore.subscribe((store) => { console.log(store.state) }) \\ subscribe to a specific store</code></pre><h3>What else?</h3><p>For more deep understanding you can read the <a href="Store.html">documentation page</a> about the <code>Store</code> class.</p>
<h2>Flue</h2><p>Flue contains all the stores, it fetches each individual state making reactive and sharing it back. It is a single <a href="SuperStore.html"><em>SuperStore</em></a> instance.
In order to add a <em>Store</em> to Flue you need to call <code>SuperStore.addStore</code> or <code>SuperStore.addStores</code>. Usually, this is done at the root of your application</p>
<pre class="prettyprint source lang-javascript"><code>import yourStore from './yourStore.js'

flue.addStore(yourStore) //now yourStore will be available</code></pre><h3>Providers</h3><p>It may be convenient to add some external package directly into the SuperStore in order to make it available from all the stores and components. Example:</p>
<pre class="prettyprint source lang-javascript"><code>import axios from 'axios'

flue.addProvider({ key: 'client', source: axios })

flue.providers.client.get(...)</code></pre><h2>Actions</h2><p>For simplicity, we provide an <strong>Action</strong> class in order to simplify the syntax. Each action is composed of a type and a payload. This is mandatory if you want to use the <em>reduceMap</em> since his payload object is passed to all the functions. You can always do what you want, just do not call <em>reduceMap</em> then.</p>
<h2>Middleware</h2><p><em>You can use Redux middleware</em>. In the following example, you can see how to add the classic <strong>redux-logger</strong> middleware to Flue.</p>
<pre class="prettyprint source lang-javascript"><code>import { flue } from 'flue-vue'
import Store1 from './Store1.js'

import logger from 'redux-logger'

flue.addStore(DummyStore)
flue.applyGlobalMiddleware([apiMiddleware, logger]) // apply middlewere to all the stores</code></pre><p>A full example that exposes all the APIs.</p>
<pre class="prettyprint source lang-javascript"><code>import { flue } from 'flue-vue'
import Store1 from './Store1.js'

import logger from 'redux-logger'
import { apiMiddleware } from 'redux-api-middleware'

flue.addStore(DummyStore)
flue.applyMiddlewareToStore(Store1, [logger]) // apply middleware to a specific store
flue.applyMiddlewareToStores([Store1,...], [logger]) // apply middleware to an flue of stores
superStore.applyGlobalMiddleware([apiMiddleware, logger]) // apply middlewere to all the stores</code></pre><p>To create a middleware just follow the <a href="http://redux.js.org/docs/advanced/Middleware.html">redux tutorial</a>.</p>
<h2>Example</h2><p>You can check out <a href="https://github.com/FrancescoSaverioZuppichini/flueVueExample">here</a> or in the <strong><code>test/examples</code></strong> folder.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Sep 27 2017 13:33:37 GMT+0200 (CEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>